<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediBook | HealthTech App</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        teal: {
                            50: '#f0fdfa',
                            100: '#ccfbf1',
                            400: '#2dd4bf',
                            500: '#14b8a6',
                            600: '#0d9488',
                            700: '#0f766e',
                            900: '#134e4a',
                        },
                        cyan: {
                            500: '#06b6d4',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://unpkg.com/lucide-react/dist/umd/lucide-react.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        /* Smooth transitions */
        .page-enter { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Custom scrollbar for slot selector */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { 
            Heart, Stethoscope, Activity, Brain, User, 
            MapPin, Star, Calendar, Clock, ChevronLeft, 
            CheckCircle, Search, Filter 
        } = window.LucideReact;

        // --- Mock Data ---
        const SPECIALTIES = [
            { id: 'all', name: 'All', icon: Activity },
            { id: 'cardio', name: 'Cardiologist', icon: Heart },
            { id: 'general', name: 'General', icon: Stethoscope },
            { id: 'neuro', name: 'Neurologist', icon: Brain },
            { id: 'dental', name: 'Dentist', icon: User },
        ];

        const DOCTORS = [
            {
                id: 1,
                name: "Dr. Sarah Abebe",
                specialty: "cardio",
                specialtyLabel: "Cardiologist",
                hospital: "Landmark Hospital",
                rating: 4.9,
                reviews: 124,
                price: 500,
                image: "https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=800&q=80",
                available: true,
                slots: [
                    { day: 'Mon', date: 'Oct 24', times: ['09:00 AM', '11:00 AM', '02:00 PM'] },
                    { day: 'Tue', date: 'Oct 25', times: ['10:00 AM', '03:00 PM'] },
                    { day: 'Wed', date: 'Oct 26', times: ['09:00 AM', '04:00 PM'] }
                ]
            },
            {
                id: 2,
                name: "Dr. Kebede Tadesse",
                specialty: "general",
                specialtyLabel: "General Doctor",
                hospital: "Korean Hospital",
                rating: 4.7,
                reviews: 89,
                price: 300,
                image: "https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=800&q=80",
                available: true,
                slots: [
                    { day: 'Mon', date: 'Oct 24', times: ['08:00 AM', '01:00 PM'] },
                    { day: 'Wed', date: 'Oct 26', times: ['09:00 AM', '11:30 AM'] }
                ]
            },
            {
                id: 3,
                name: "Dr. Tigist Bekele",
                specialty: "dental",
                specialtyLabel: "Dentist",
                hospital: "Brass Dental Clinic",
                rating: 4.8,
                reviews: 210,
                price: 450,
                image: "https://images.unsplash.com/photo-1594824476967-48c8b964273f?w=800&q=80",
                available: false,
                slots: []
            },
            {
                id: 4,
                name: "Dr. Dawit Alemu",
                specialty: "neuro",
                specialtyLabel: "Neurologist",
                hospital: "Black Lion Hospital",
                rating: 5.0,
                reviews: 56,
                price: 700,
                image: "https://images.unsplash.com/photo-1537368910025-700350fe46c7?w=800&q=80",
                available: true,
                slots: [
                    { day: 'Tue', date: 'Oct 25', times: ['10:00 AM'] },
                    { day: 'Fri', date: 'Oct 28', times: ['09:00 AM', '02:00 PM'] }
                ]
            }
        ];

        // --- Components ---

        const Navbar = () => (
            <nav className="bg-white border-b border-slate-100 sticky top-0 z-50">
                <div className="max-w-md mx-auto px-4 h-16 flex items-center justify-between">
                    <div className="flex items-center gap-2">
                        <div className="bg-teal-500 p-1.5 rounded-lg">
                            <Activity className="text-white w-5 h-5" />
                        </div>
                        <span className="font-bold text-xl text-slate-800">Medi<span className="text-teal-500">Book</span></span>
                    </div>
                    <div className="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-500">
                        <User className="w-5 h-5" />
                    </div>
                </div>
            </nav>
        );

        const DoctorCard = ({ doctor, onClick }) => (
            <div 
                onClick={() => doctor.available && onClick(doctor)}
                className={`bg-white rounded-2xl p-4 border border-slate-100 shadow-sm mb-4 transition-all ${doctor.available ? 'hover:shadow-md hover:border-teal-200 cursor-pointer' : 'opacity-60 cursor-not-allowed'}`}
            >
                <div className="flex gap-4">
                    <img src={doctor.image} className="w-20 h-20 rounded-xl object-cover" alt={doctor.name} />
                    <div className="flex-1">
                        <div className="flex justify-between items-start">
                            <div>
                                <h3 className="font-bold text-slate-900">{doctor.name}</h3>
                                <p className="text-xs text-teal-600 font-medium">{doctor.specialtyLabel}</p>
                            </div>
                            <div className="flex items-center gap-1 bg-yellow-50 px-1.5 py-0.5 rounded text-xs font-bold text-yellow-600">
                                <Star className="w-3 h-3 fill-current" /> {doctor.rating}
                            </div>
                        </div>
                        
                        <div className="flex items-center gap-1 text-slate-400 text-xs mt-2 mb-3">
                            <MapPin className="w-3 h-3" /> {doctor.hospital}
                        </div>

                        <div className="flex items-center justify-between">
                            <span className="font-bold text-slate-900">ETB {doctor.price}</span>
                            {doctor.available ? (
                                <span className="text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full font-medium">Available</span>
                            ) : (
                                <span className="text-xs text-red-500 bg-red-50 px-2 py-1 rounded-full font-medium">Booked</span>
                            )}
                        </div>
                    </div>
                </div>
            </div>
        );

        const DoctorDetail = ({ doctor, onBack, onBook }) => {
            const [selectedDateIndex, setSelectedDateIndex] = useState(0);
            const [selectedTime, setSelectedTime] = useState(null);

            const handleBook = () => {
                if(selectedTime) {
                    onBook({
                        doctor: doctor,
                        date: doctor.slots[selectedDateIndex].date,
                        day: doctor.slots[selectedDateIndex].day,
                        time: selectedTime
                    });
                }
            };

            return (
                <div className="page-enter pb-24">
                    {/* Header Image */}
                    <div className="relative h-48 bg-teal-600">
                        <img src={doctor.image} className="w-full h-full object-cover opacity-50" />
                        <button 
                            onClick={onBack}
                            className="absolute top-4 left-4 bg-white/20 backdrop-blur-md p-2 rounded-full text-white hover:bg-white/30"
                        >
                            <ChevronLeft className="w-6 h-6" />
                        </button>
                    </div>

                    {/* Content */}
                    <div className="relative -mt-6 bg-white rounded-t-3xl px-6 pt-8">
                        <div className="flex justify-between items-start mb-2">
                            <h1 className="text-2xl font-bold text-slate-900">{doctor.name}</h1>
                            <div className="text-teal-600 font-bold text-lg">ETB {doctor.price}</div>
                        </div>
                        <p className="text-slate-500 text-sm mb-6">{doctor.specialtyLabel} â€¢ {doctor.hospital}</p>
                        
                        <div className="flex gap-4 mb-8">
                            <div className="flex-1 bg-slate-50 p-3 rounded-xl text-center">
                                <div className="text-lg font-bold text-slate-900">{doctor.reviews}</div>
                                <div className="text-xs text-slate-500">Reviews</div>
                            </div>
                            <div className="flex-1 bg-slate-50 p-3 rounded-xl text-center">
                                <div className="text-lg font-bold text-slate-900">{doctor.rating}</div>
                                <div className="text-xs text-slate-500">Rating</div>
                            </div>
                            <div className="flex-1 bg-slate-50 p-3 rounded-xl text-center">
                                <div className="text-lg font-bold text-slate-900">10+</div>
                                <div className="text-xs text-slate-500">Years</div>
                            </div>
                        </div>

                        <h3 className="font-bold text-slate-900 mb-4 flex items-center gap-2">
                            <Calendar className="w-5 h-5 text-teal-500" /> Select Date
                        </h3>
                        
                        <div className="flex gap-3 overflow-x-auto no-scrollbar mb-6 pb-2">
                            {doctor.slots.map((slot, idx) => (
                                <button
                                    key={idx}
                                    onClick={() => { setSelectedDateIndex(idx); setSelectedTime(null); }}
                                    className={`flex-shrink-0 w-16 h-20 rounded-2xl flex flex-col items-center justify-center border transition-all ${
                                        selectedDateIndex === idx 
                                        ? 'bg-teal-500 border-teal-500 text-white shadow-lg shadow-teal-500/30' 
                                        : 'bg-white border-slate-200 text-slate-400'
                                    }`}
                                >
                                    <span className="text-xs font-medium">{slot.day}</span>
                                    <span className="text-lg font-bold">{slot.date.split(' ')[1]}</span>
                                </button>
                            ))}
                        </div>

                        <h3 className="font-bold text-slate-900 mb-4 flex items-center gap-2">
                            <Clock className="w-5 h-5 text-teal-500" /> Available Slots
                        </h3>

                        <div className="grid grid-cols-3 gap-3 mb-8">
                            {doctor.slots[selectedDateIndex].times.map((time) => (
                                <button
                                    key={time}
                                    onClick={() => setSelectedTime(time)}
                                    className={`py-2 px-1 rounded-lg text-sm font-medium border transition-all ${
                                        selectedTime === time
                                        ? 'border-teal-500 bg-teal-50 text-teal-700'
                                        : 'border-slate-200 text-slate-600 hover:border-teal-200'
                                    }`}
                                >
                                    {time}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Fixed Bottom Action */}
                    <div className="fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-slate-100 max-w-md mx-auto">
                        <button 
                            disabled={!selectedTime}
                            onClick={handleBook}
                            className={`w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ${
                                selectedTime 
                                ? 'bg-teal-600 hover:bg-teal-700 text-white shadow-lg shadow-teal-600/30' 
                                : 'bg-slate-200 text-slate-400 cursor-not-allowed'
                            }`}
                        >
                            Confirm Appointment
                        </button>
                    </div>
                </div>
            );
        };

        const Confirmation = ({ booking, onHome }) => (
            <div className="page-enter min-h-screen flex flex-col items-center justify-center p-6 text-center bg-white">
                <div className="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6">
                    <CheckCircle className="w-12 h-12 text-green-500" />
                </div>
                <h2 className="text-2xl font-bold text-slate-900 mb-2">Booking Confirmed!</h2>
                <p className="text-slate-500 mb-8">Your appointment has been scheduled successfully.</p>

                <div className="bg-slate-50 rounded-2xl p-6 w-full max-w-sm border border-slate-100 mb-8 text-left">
                    <div className="flex gap-4 border-b border-slate-200 pb-4 mb-4">
                        <img src={booking.doctor.image} className="w-12 h-12 rounded-lg object-cover" />
                        <div>
                            <h4 className="font-bold text-slate-900">{booking.doctor.name}</h4>
                            <p className="text-xs text-slate-500">{booking.doctor.specialtyLabel}</p>
                        </div>
                    </div>
                    
                    <div className="space-y-3">
                        <div className="flex justify-between">
                            <span className="text-sm text-slate-500">Date</span>
                            <span className="text-sm font-medium text-slate-900">{booking.day}, {booking.date}</span>
                        </div>
                        <div className="flex justify-between">
                            <span className="text-sm text-slate-500">Time</span>
                            <span className="text-sm font-medium text-slate-900">{booking.time}</span>
                        </div>
                        <div className="flex justify-between">
                            <span className="text-sm text-slate-500">Location</span>
                            <span className="text-sm font-medium text-slate-900">{booking.doctor.hospital}</span>
                        </div>
                    </div>
                </div>

                <button 
                    onClick={onHome}
                    className="w-full max-w-sm py-3 rounded-xl bg-slate-900 text-white font-semibold"
                >
                    Back to Home
                </button>
            </div>
        );

        // --- Main App Logic ---

        const App = () => {
            const [view, setView] = useState('home'); // home, details, success
            const [selectedSpecialty, setSelectedSpecialty] = useState('all');
            const [selectedDoctor, setSelectedDoctor] = useState(null);
            const [bookingData, setBookingData] = useState(null);

            const filteredDoctors = selectedSpecialty === 'all' 
                ? DOCTORS 
                : DOCTORS.filter(doc => doc.specialty === selectedSpecialty);

            const handleDoctorClick = (doc) => {
                setSelectedDoctor(doc);
                setView('details');
                window.scrollTo(0, 0);
            };

            const handleBooking = (data) => {
                setBookingData(data);
                setView('success');
            };

            const goHome = () => {
                setSelectedDoctor(null);
                setBookingData(null);
                setView('home');
            };

            return (
                <div className="min-h-screen max-w-md mx-auto bg-slate-50 shadow-2xl overflow-hidden min-h-screen relative">
                    {view === 'home' && (
                        <div className="page-enter pb-8">
                            <Navbar />
                            
                            {/* Search Header */}
                            <div className="px-4 pt-6 pb-2">
                                <h1 className="text-2xl font-bold text-slate-900 mb-1">Find your doctor</h1>
                                <p className="text-slate-400 text-sm mb-6">Book appointments with top specialists.</p>
                                
                                <div className="relative mb-6">
                                    <Search className="absolute left-3 top-3.5 w-5 h-5 text-slate-400" />
                                    <input 
                                        type="text" 
                                        placeholder="Search doctor, medicines..." 
                                        className="w-full bg-white pl-10 pr-4 py-3 rounded-xl shadow-sm border border-slate-100 outline-none focus:ring-2 focus:ring-teal-500/50"
                                    />
                                </div>
                            </div>

                            {/* Specialty Selector */}
                            <div className="px-4 mb-6">
                                <div className="flex items-center justify-between mb-3">
                                    <h3 className="font-bold text-slate-900">Specialty</h3>
                                    <span className="text-xs text-teal-600 font-medium">See all</span>
                                </div>
                                <div className="flex gap-4 overflow-x-auto no-scrollbar pb-2">
                                    {SPECIALTIES.map(spec => (
                                        <button 
                                            key={spec.id}
                                            onClick={() => setSelectedSpecialty(spec.id)}
                                            className={`flex flex-col items-center gap-2 min-w-[70px] transition-all ${
                                                selectedSpecialty === spec.id ? 'scale-105' : 'opacity-70 hover:opacity-100'
                                            }`}
                                        >
                                            <div className={`w-14 h-14 rounded-2xl flex items-center justify-center shadow-sm ${
                                                selectedSpecialty === spec.id ? 'bg-teal-500 text-white shadow-teal-500/30' : 'bg-white text-teal-600'
                                            }`}>
                                                <spec.icon className="w-6 h-6" />
                                            </div>
                                            <span className={`text-xs font-medium ${selectedSpecialty === spec.id ? 'text-teal-700' : 'text-slate-500'}`}>
                                                {spec.name}
                                            </span>
                                        </button>
                                    ))}
                                </div>
                            </div>

                            {/* Doctor List */}
                            <div className="px-4">
                                <div className="flex items-center justify-between mb-3">
                                    <h3 className="font-bold text-slate-900">Top Doctors</h3>
                                    <Filter className="w-4 h-4 text-slate-400" />
                                </div>
                                
                                {filteredDoctors.length > 0 ? (
                                    filteredDoctors.map(doc => (
                                        <DoctorCard key={doc.id} doctor={doc} onClick={handleDoctorClick} />
                                    ))
                                ) : (
                                    <div className="text-center py-12 text-slate-400">
                                        No doctors found in this category.
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {view === 'details' && selectedDoctor && (
                        <DoctorDetail 
                            doctor={selectedDoctor} 
                            onBack={() => setView('home')} 
                            onBook={handleBooking}
                        />
                    )}

                    {view === 'success' && bookingData && (
                        <Confirmation 
                            booking={bookingData} 
                            onHome={goHome} 
                        />
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
